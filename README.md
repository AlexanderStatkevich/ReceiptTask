# ReceiptTask
Test task for CLEVERTEC

## О проекте
Поставленная задача:
Разработать консольное приложение, реализующее функционал формирования
чека в магазине.
* приложение запускается с параметрами в переменных окружения в формате itemId-quantity (itemId - идентификатор товара, quantity -его количество), Card-1234 означает, что была предъявлена скидочная карта с номером 1234.
* необходимо вывести в консоль сформированный чек, содержащий в себе список товаров и их количество с ценой, а также рассчитанную сумму с учетом скидки по предъявленной карте (если она есть).
* среди товаров предусмотреть акционные. Если их в чеке больше пяти, то сделать скидку 10% по этой позиции. Данную информацию отразить в чеке.
* реализовать обработку исключений
* реализовать вывод чека в файл.
* организовать чтение исходных данных из файлов
* покрыть функционал юнит-тестами (не менее 70%)
  Дополнительные задачи:
* замена хранения исходных данных в файлах на PostgreSQL
* реализовать RESTFUL - интерфейс
* Развернуть приложение и PostgreSQL в Docker

### Использованный стэк
* Java 17
* Gradle 7.5
* JUnit 5
* Java Servlet API
* Jackson Databind
* PostgreSQL


## Описание
Приложение реализованное в соответствии с основными пунктами задания находится в ветке "master". Реализация дополнительных пунктов находится в ветке "items_with_asterisks_implementation".

В проекте применены обязательно требуемые паттерны: Factory(для создания принтеров), Decorator(для расчета различных скидок в Calculator), Builder(для создания сущности CommonProduct, однако не используется в DiscountCard вследствие небольшого количества полей). Также в проекте используются следующие паттерны: Singleton, DAO, DTO.


### Инструкция по запуску
Базово для запуска приложения необходимо в переменные окружения задать параметры id товаров их количества и при необходимости скидочной карты, например:
  ```sh
  1-2 2-3 3-4 card-1111.
  ```
Также данные в идентичном формате можно передать в файле, для этого необходимо создать файл с исходными данными и при запуске в переменные окружения передать название фала в формате:
 ```sh
 file-{filename.txt}.
  ```
Для печати в консоль или в файл необходимо в demo/Runner.java создать соответсвующую PrinterFactory (ConsolePrinterFactory,FilePrinterFactory).

При развертывании собранного war файла передать исходные данные можно по эндпоинту order в формате:
 ```sh
/order?1=2&2=3&3=4&card=1234.
  ```


## Contact

Alexander Statkevich - aastatkevich@gmail.com

Project Link: [https://github.com/AlexanderStatkevich/ReceiptTask](https://github.com/AlexanderStatkevich/ReceiptTask)

<p align="right">(<a href="#readme-top">back to top</a>)</p>